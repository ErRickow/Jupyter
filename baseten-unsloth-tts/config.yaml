model_name: unsloth-tts
python_version: py311

# Model metadata
model_metadata:
  example_model_input:
    text: "Hello, this is a test of text to speech synthesis using Unsloth!"
    voice: "tara"
    temperature: 0.7
    max_new_tokens: 512
    emotion: ""
    return_format: "base64"

# Python dependencies
# Note: Using compatible versions based on Unsloth 2025.11 requirements
requirements:
  # Core ML libraries - let Unsloth determine compatible versions
  - torch>=2.4.0
  - torchvision>=0.19.0
  - torchaudio>=2.4.0
  - transformers>=4.51.3
  - accelerate>=0.34.1
  - bitsandbytes>=0.45.5

  # Unsloth and SNAC vocoder
  - unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git
  - snac @ git+https://github.com/hubertsiuzdak/snac.git

  # Audio processing
  - soundfile
  - scipy

# System packages (if needed for audio processing)
system_packages:
  - ffmpeg
  - libsndfile1

# Resources - Optimized for T4 GPU
resources:
  cpu: "4"
  memory: 16Gi
  use_gpu: true
  accelerator: T4

  # Autoscaling configuration - SCALE TO ZERO when idle
  autoscaling:
    min_replicas: 0          # Scale to ZERO saat tidak ada traffic (HEMAT!)
    max_replicas: 3          # Max scale saat high traffic
    target_concurrency: 2    # Requests per replica before scaling up
    scale_down_delay: 300    # Wait 5 minutes idle before scaling down

# Runtime configuration
runtime:
  predict_concurrency: 4

# Environment variables
environment_variables: {}

# Secrets (add your HuggingFace token if using gated models)
secrets: {}

# Note: base_image is not specified - Baseten will auto-select the best image
# based on python_version and GPU requirements
